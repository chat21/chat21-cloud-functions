{
  "_args": [
    [
      {
        "raw": "replacestream@https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
        "scope": null,
        "escapedName": "replacestream",
        "name": "replacestream",
        "rawSpec": "https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
        "spec": "https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
        "type": "remote"
      },
      "/Users/andrealeo/dev/chat21/chat21-firebase-cloud-functions-v2/functions/node_modules/firebase-admin"
    ]
  ],
  "_from": "replacestream@https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
  "_id": "replacestream@4.0.3",
  "_inCache": true,
  "_location": "/firebase-admin/replacestream",
  "_phantomChildren": {},
  "_requested": {
    "raw": "replacestream@https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
    "scope": null,
    "escapedName": "replacestream",
    "name": "replacestream",
    "rawSpec": "https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
    "spec": "https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
    "type": "remote"
  },
  "_requiredBy": [
    "/firebase-admin",
    "/firebase-admin/gulp-replace"
  ],
  "_resolved": "https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
  "_shasum": "3ee5798092be364b1cdb1484308492cb3dff2f36",
  "_shrinkwrap": null,
  "_spec": "replacestream@https://registry.npmjs.org/replacestream/-/replacestream-4.0.3.tgz",
  "_where": "/Users/andrealeo/dev/chat21/chat21-firebase-cloud-functions-v2/functions/node_modules/firebase-admin",
  "author": {
    "name": "Eugene Ware",
    "email": "eugene@noblesamurai.com"
  },
  "bugs": {
    "url": "https://github.com/eugeneware/replacestream/issues"
  },
  "dependencies": {
    "escape-string-regexp": "^1.0.3",
    "object-assign": "^4.0.1",
    "readable-stream": "^2.0.2"
  },
  "description": "A node.js through stream that does basic streaming text search and replace and is chunk boundary friendly",
  "devDependencies": {
    "chai": "^4.1.2",
    "concat-stream": "^1.6.0",
    "istanbul": "^0.4.5",
    "istanbul-coveralls": "^1.0.3",
    "mocha": "^3.5.3"
  },
  "files": [
    "index.js"
  ],
  "homepage": "https://github.com/eugeneware/replacestream#readme",
  "keywords": [
    "replace",
    "text",
    "regex",
    "stream",
    "streams",
    "streaming",
    "search"
  ],
  "license": "BSD-3-Clause",
  "name": "replacestream",
  "optionalDependencies": {},
  "readme": "# replacestream\n\nA [node.js transform stream](https://nodejs.org/api/stream.html#stream_class_stream_transform) for basic streaming text search/replacement friendy with chunk boundary.\n\n[![build status](https://secure.travis-ci.org/eugeneware/replacestream.svg)](http://travis-ci.org/eugeneware/replacestream)\n[![Coverage Status](https://coveralls.io/repos/eugeneware/replacestream/badge.svg?branch=master)](https://coveralls.io/r/eugeneware/replacestream?branch=master)\n\n## Installation\n\nInstall via [npm](https://www.npmjs.com/):\n\n``` shell\n$ npm install replacestream\n```\n\n## Examples\n\n### Search and replace over a test file\n\nSay we want to do a search and replace over the following file:\n\n```\n// happybirthday.txt\nHappy birthday to you!\nHappy birthday to you!\nHappy birthday to dear Liza!\nHappy birthday to you!\n```\n\n``` js\nvar replaceStream = require('replacestream')\n  , fs = require('fs')\n  , path = require('path');\n\n// Replace all the instances of 'birthday' with 'earthday'\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream('birthday', 'earthday'))\n  .pipe(process.stdout);\n```\n\nRunning this will print out:\n\n``` bash\n$ node simple.js\nHappy earthday to you!\nHappy earthday to you!\nHappy earthday to dear Liza!\nHappy earthday to you!\n```\n\nYou can also limit the number of replaces to first ```n```:\n\n``` js\n// Replace the first 2 of the instances of 'birthday' with 'earthday'\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream('birthday', 'earthday', { limit: 2 } ))\n  .pipe(process.stdout);\n```\n\nWhich would output:\n\n``` bash\n$ node simple.js\nHappy earthday to you!\nHappy earthday to you!\nHappy birthday to dear Liza!\nHappy birthday to you!\n```\n\nAnd you can also pass in a replacement function which will get called for each\nreplacement:\n\n``` js\n// Replace the word 'Happy' with a different word each time\nvar words = ['Awesome', 'Good', 'Super', 'Joyous'];\nfunction replaceFn(match) {\n  return words.shift();\n}\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream('Happy', replaceFn))\n  .pipe(process.stdout);\n```\n\nWhich would output:\n\n``` bash\n$ node simple.js\nAwesome birthday to you!\nGood birthday to you!\nSuper birthday to dear Liza!\nJoyous birthday to you!\n```\n\n### Search and replace with Regular Expressions\n\nHere's the same example, but with RegEx:\n\n```\n// happybirthday.txt\nHappy birthday to you!\nHappy birthday to you!\nHappy birthday to dear Liza!\nHappy birthday to you!\n```\n\n``` js\nvar replaceStream = require('replacestream')\n  , fs = require('fs')\n  , path = require('path');\n\n// Replace any word that has an 'o' with 'oh'\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream(/\\w*o\\w*/g, 'oh'))\n  .pipe(process.stdout);\n```\n\nRunning this will print out:\n\n``` bash\n$ node simple.js\nHappy birthday oh oh!\nHappy birthday oh oh!\nHappy birthday oh dear Liza!\nHappy birthday oh oh!\n```\n\nYou can also insert captures using the $1 ($index) notation. This is similar the built in method [replace](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter).\n\n```\n// happybirthday.txt\nHappy birthday to you!\nHappy birthday to you!\nHappy birthday to dear Liza!\nHappy birthday to you!\n```\n\n``` js\nvar replaceStream = require('replacestream')\n  , fs = require('fs')\n  , path = require('path');\n\n// Replace any word that has an 'o' with 'oh'\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream(/(dear) (Liza!)/, 'my very good and $1 friend $2'))\n  .pipe(process.stdout);\n```\n\nRunning this will print:\n\n``` bash\n$ node simple.js\nHappy birthday to you!\nHappy birthday to you!\nHappy birthday to my very good and dear friend Liza!\nHappy birthday to you!\n```\n\nYou can also pass in a replacement function. The function will be passed parameters just like [String.prototype.replace](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace) (e.g. replaceFunction(match, p1, p2, offset, string)). In this case the matched string is limited to the buffer the match is found on, not the entire stream.\n\n``` js\nfunction replaceFn() {\n  return arguments[2] + ' to ' + arguments[1]\n}\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream(/(birt\\w*)\\sto\\s(you)/g, replaceFn))\n  .pipe(process.stdout);\n```\n\nWhich would output:\n\n``` bash\n$ node simple.js\nHappy you to birthday!\nHappy you to birthday!\nHappy birthday to dear Liza!\nHappy you to birthday!\n```\n\n### Web server search and replace over a test file\n\nHere's the same example, but kicked off from a HTTP server:\n\n``` js\n// server.js\nvar http = require('http')\n  , fs = require('fs')\n  , path = require('path')\n  , replaceStream = require('replacestream');\n\nvar app = function (req, res) {\n  if (req.url.match(/^\\/happybirthday\\.txt$/)) {\n    res.writeHead(200, { 'Content-Type': 'text/plain' });\n    fs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n      .pipe(replaceStream('birthday', 'earthday'))\n      .pipe(res);\n  } else {\n    res.writeHead(200, { 'Content-Type': 'text/plain' });\n    res.end('File not found');\n  }\n};\nvar server = http.createServer(app).listen(3000);\n```\n\nWhen you request the file:\n```\n$ curl -i \"http://localhost:3000/happybirthday.txt\"\nHTTP/1.1 200 OK\nContent-Type: text/plain\nDate: Mon, 08 Jul 2013 06:45:21 GMT\nConnection: keep-alive\nTransfer-Encoding: chunked\n\nHappy earthday to you!\nHappy earthday to you!\nHappy earthday to dear Liza!\nHappy earthday to you!\n```\n\nNB: If your readable Stream that you're piping through the `replacestream` is\npaused, then you may have to call the `.resume()` method on it.\n\n## Configuration\n\n### Changing the encoding\n\nYou can also change the text encoding of the search and replace by setting an\nencoding property on the options object:\n\n``` js\n// Replace the first 2 of the instances of 'birthday' with 'earthday'\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream('birthday', 'earthday', { limit: 2, encoding: 'ascii' } ))\n  .pipe(process.stdout);\n```\n\nBy default the encoding will be set to 'utf8'.\n\n## List of options\n\nOption        | Default   | Description\n------        | -------   | -----------\nlimit         | Infinity  | Sets a limit on the number of times the replacement will be made. This is forced to one when a regex without the global flag is provided.\nencoding      | utf8      | The text encoding used during search and replace.\nmaxMatchLen   | 100       | When doing cross-chunk replacing, this sets the maximum length match that will be supported.\nignoreCase    | true      | When doing string match (not relevant for regex matching) whether to do a case insensitive search.\nregExpOptions | undefined | (Deprecated) When provided, these flags will be used when creating the search regexes internally. This functionality is deprecated as the flags set on the regex provided are no longer mutated if this is not provided.\n\n## FAQ\n\n### What does \"chunk boundary friendly\" mean?\n\nIt means that a replace should happen even if the string to be replaced is between streaming chunks of data. For example, say I do something like this\n\n```js\nfs.createReadStream(path.join(__dirname, 'happybirthday.txt'))\n  .pipe(replaceStream('birthday', 'earthday'))\n  .pipe(process.stdout);\n```\n\nHere i am trying to replace all instances of `'birthday'` with `'earthday'`. Let's say the first chunk of data that is available is `'happy birth'` and the second chunk of data available is `'day'`. In this case the replace will happen successfully, the same as it would have if the chunk contained the entire string that was to be replaced (e.g. `chunk1 = 'happy' chunk2 = 'birthday'`)\n\n### Does that apply across more than 2 chunks? How does it work with regexes?\n\nIt does apply across multiple chunks. By default, however, the maximum match length (`maxMatchLen`) is set to 100 characters. You can increase this by adding `maxMatchLen: x` to your options:\n\n```js\nreplacestream('hi', 'bye', {maxMatchLen: 1000})\n```\n\nA string the size of `maxMatchLen` will be saved in memory so it shouldn't be set too high. `maxMatchLen` is what allows us to have a match between chunks. We are saving `maxMatchLen` characters in a string (the last `maxMatchLen` characters from the previous chunks) that we prepend to the current chunk, then attempt to find a match.\n\nAs for regex it works exactly the same except you would pass a regular expression into replacestream:\n\n```js\nreplacestream(/a+/, 'b')\n```\n\n## Contributing\n\nreplacestream is an **OPEN Open Source Project**. This means that:\n\n> Individuals making significant and valuable contributions are given commit-access to the project to contribute as they see fit. This project is more like an open wiki than a standard guarded open source project.\n\nSee the [CONTRIBUTING.md](https://github.com/eugeneware/replacestream/blob/master/CONTRIBUTING.md) file for more details.\n\n### Contributors\n\nreplacestream is only possible due to the excellent work of the following contributors:\n\n<table><tbody>\n<tr><th align=\"left\">Eugene Ware</th><td><a href=\"https://github.com/eugeneware\">GitHub/eugeneware</a></td></tr>\n<tr><th align=\"left\">Ryan Mehta</th><td><a href=\"https://github.com/mehtaphysical\">GitHub/mehtaphysical</a></td></tr>\n<tr><th align=\"left\">Tim Chaplin</th><td><a href=\"https://github.com/tjchaplin\">GitHub/tjchaplin</a></td></tr>\n<tr><th align=\"left\">Bryce Gibson</th><td><a href=\"https://github.com/bryce-gibson\">GitHub/bryce-gibson</a></td></tr>\n<tr><th align=\"left\">Romain</th><td><a href=\"https://github.com/Filirom1\">GitHub/Filirom1</a></td></tr>\n<tr><th align=\"left\">Shinnosuke Watanabe</th><td><a href=\"https://github.com/shinnn\">GitHub/shinnn</a></td></tr>\n<tr><th align=\"left\">Steve Mao</th><td><a href=\"https://github.com/stevemao\">GitHub/stevemao</a></td></tr>\n<tr><th align=\"left\">Martin Petlu≈°</th><td><a href=\"https://github.com/martinpetlus\">GitHub/martinpetlus</a></td></tr>\n</tbody></table>\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/eugeneware/replacestream.git"
  },
  "scripts": {
    "coverage": "istanbul cover _mocha",
    "coveralls": "${npm_package_scripts_coverage} && istanbul-coveralls",
    "test": "mocha --growl --full-trace"
  },
  "version": "4.0.3"
}
